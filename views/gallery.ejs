<% include header %>

<script>
	// Template variables from server
	var userLogin = '<%= userLogin %>';
</script>
<script src="scripts/lifestream-app-gallery.js"></script>
<div ng-controller="LifeStreamGalleryController as gallery">
	<div class="gallery-section">
		<!-- Show the unaffixed header when the gallery is collapsed -->
		<h2 ng-hide="gallery.images.mine.expanded">
			Your uploads
			<small>
				<a ng-click="gallery.expandGrid(gallery.images.mine, gallery.myStreams)" href="#">More »</a>
			</small>
		</h2>
		<!-- Show the affixed header when the gallery is expanded -->
		<h2 data-spy="affix" data-offset-top="92" ng-show="gallery.images.mine.expanded">
			Your uploads
			<small>
				<a ng-click="gallery.collapseGrid(gallery.images.mine)" href="#">Less «</a>
			</small>
		</h2>
		<div ng-class="[ 'gallery-grid', { expanded: gallery.images.mine.expanded } ]" in-view-container>
			<div ng-repeat="image in gallery.images.mine">
				<div ng-click="gallery.zoomImage(gallery.images.mine, $index)" class="gallery-tile" ng-style="{ 'background-image': 'url(' + image.thumbUrl + ')' }">
					<ul>
						<li>{{image.uploader}}</li>
						<li>{{image.uploadTime * 1000 | date : "yyyy-MM-dd @ HH:mm:ss"}}</li>
						<li><span ng-show="image.comment" class="glyphicon glyphicon-comment" /></li>
					</ul>
				</div>
			</div>
			<div ng-show="gallery.images.mine.expanded" in-view="$inview && gallery.loadMoreImages(gallery.images.mine)" class="gallery-tile placeholder"></div>
		</div>
	</div>
	<div class="gallery-section">
		<h2>Streams you follow <small><a ng-click="gallery.expandStreamImages()" href="#">More »</a></small></h2>
		<div class="gallery-grid">
			<div ng-repeat="image in gallery.images.others">
			</div>
		</div>
	</div>
	<div ng-show="gallery.zoomed" class="gallery-zoom">
	</div>
</div>

<% include footer %>
